<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"> 
  <title>파싱 도구</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 30px;
      background: #f7f7f7;
    }
    textarea {
      width: 100%;
      height: 100px;
      font-family: monospace;
      font-size: 14px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 10px 0;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background: white;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    th {
      background: #eee;
    }
  </style>
</head>
<body>

  <h2>서울시 확장형(온도, 단선) 원격검침 서버 수신용 데이터포맷[V1.5] NB-IoT</h2>
  <textarea id="inputData" placeholder="여기에 데이터를 붙여넣으세요 (최소 90자)"></textarea>
  <br />
  <button onclick="parseData()">파싱하기</button>

  <table id="resultTable">
    <thead>
      <tr><th>데이터 키</th><th>값</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
 const fieldMap = [
  [2, 1, "header"],
  [2, 3, "length"],
  [2, 5, "type"],
  [16, 7, "imei"],
  [16, 23, "imsi"],
  [2, 39, "rssi"],
  [2, 41, "ber"],
  [4, 43, "cid"],
  [4, 47, "rsrp"],
  [4, 51, "rsrq"],
  [4, 55, "snr"],
  [10, 59, "devNo"],
  [4, 69, "devFw"],
  [2, 73, "devVolt"],
  [8, 75, "meterNo"],
  [2, 83, "meterType"],
  [2, 85, "meterCaliber"],
  [2, 87, "meterStatus"],
  [2, 89, "msrCycle"],
  [2, 91, "msrReport"],
  [2, 93, "year"],
  [2, 95, "month"],
  [2, 97, "day"],
  [2, 99, "hour"],
  [2, 101, "minute"],
  [2, 103, "second"],
  [2, 105, "msrCycle"],
  [2, 107, "msrCnt"],
  [2, 109, "msrStdIdx"],
  [8, 111, "msrStdValue"],
  [4, 119, "msrOffset 0"],
  [4, 123, "tempValue 0"],
  [2, 127, "cableStatus 0"],
  [4, 129, "msrOffset 1"],
  [4, 133, "tempValue 1"],
  [2, 137, "cableStatus 1"],
  [4, 139, "msrOffset 2"],
  [4, 143, "tempValue 2"],
  [2, 147, "cableStatus 2"],
  [4, 149, "msrOffset 3"],
  [4, 153, "tempValue 3"],
  [2, 157, "cableStatus 3"],
  [4, 159, "msrOffset 4"],
  [4, 163, "tempValue 4"],
  [2, 167, "cableStatus 4"],
  [4, 169, "msrOffset 5"],
  [4, 173, "tempValue 5"],
  [2, 177, "cableStatus 5"],
  [4, 179, "msrOffset 6"],
  [4, 183, "tempValue 6"],
  [2, 187, "cableStatus 6"],
  [4, 189, "msrOffset 7"],
  [4, 193, "tempValue 7"],
  [2, 197, "cableStatus 7"],
  [4, 199, "msrOffset 8"],
  [4, 203, "tempValue 8"],
  [2, 207, "cableStatus 8"],
  [4, 209, "msrOffset 9"],
  [4, 213, "tempValue 9"],
  [2, 217, "cableStatus 0"],
  [4, 219, "msrOffset 10"],
  [4, 223, "tempValue 10"],
  [2, 227, "cableStatus 10"],
  [4, 229, "msrOffset 11"],
  [4, 233, "tempValue 11"],
  [2, 237, "cableStatus 11"],
  [4, 239, "msrOffset 12"],
  [4, 243, "tempValue 12"],
  [2, 247, "cableStatus 12"],
  [4, 249, "msrOffset 13"],
  [4, 253, "tempValue 13"],
  [2, 257, "cableStatus 13"],
  [4, 259, "msrOffset 14"],
  [4, 263, "tempValue 14"],
  [2, 267, "cableStatus 14"],
  [4, 269, "msrOffset 15"],
  [4, 273, "tempValue 15"],
  [2, 277, "cableStatus 15"],
  [4, 279, "msrOffset 16"],
  [4, 283, "tempValue 16"],
  [2, 287, "cableStatus 16"],
  [4, 289, "msrOffset 17"],
  [4, 293, "tempValue 17"],
  [2, 297, "cableStatus 17"],
  [2, 299, "checksum"]
];

    function parseData() {
    const data = document.getElementById("inputData").value.trim();
    const tbody = document.querySelector("#resultTable tbody");
    tbody.innerHTML = "";

    if (data.length < 90) {
        alert("데이터는 최소 90자 이상이어야 합니다.");
        return;
    }

      fieldMap.forEach(([length, start, fieldName]) => {
        const startIdx = start - 1;
        const endIdx = startIdx + length;
        const rawValue = data.slice(startIdx, endIdx);

        const row = document.createElement("tr");
        row.innerHTML = `<td>${fieldName}</td><td>${rawValue}</td>`;
        tbody.appendChild(row);
      });
    }
  </script>

</body>
</html>